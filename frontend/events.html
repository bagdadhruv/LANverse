<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LANverse â€“ Event Details</title>
  <link rel="stylesheet" href="assets/css/lanverse.css">
  <style>
    /* Remove custom :root and body styles, use shared theme */
    .event-banner {
      position: relative;
      width: 100vw;
      max-width: 100%;
      height: 240px;
      overflow: hidden;
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .event-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.7);
    }
    .banner-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.2rem;
      background: linear-gradient(180deg, rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.7) 100%);
    }
    .banner-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.3rem;
      text-shadow: 0 2px 12px var(--black);
      color: var(--neon-pink);
    }
    .banner-date-time {
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--neon-blue);
      text-shadow: 0 2px 8px var(--black);
    }
    .banner-badges {
      position: absolute;
      top: 1rem;
      left: 1rem;
      display: flex;
      gap: 0.5rem;
    }
    .badge {
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
      color: var(--white);
      font-weight: 700;
      padding: 0.3rem 0.8rem;
      border-radius: 999px;
      font-size: 0.95rem;
      box-shadow: 0 0 8px var(--neon-purple);
      letter-spacing: 0.02em;
    }
    .banner-actions {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      gap: 0.7rem;
    }
    .icon-btn {
      background: rgba(0,0,0,0.4);
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--neon-blue);
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 0 8px var(--neon-blue);
      transition: background 0.2s;
    }
    .icon-btn:active {
      background: rgba(0,0,0,0.7);
    }
    main {
      flex: 1;
      padding: 1.2rem 0.7rem 5.5rem 0.7rem;
      max-width: 600px;
      margin: 0 auto;
    }
    .glass-card {
      background: rgba(35,35,43,0.7);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      margin-bottom: 1.2rem;
      padding: 1.2rem 1rem;
      position: relative;
      color: var(--white);
    }
    .host-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.7rem;
    }
    .host-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--neon-pink);
      box-shadow: 0 0 8px var(--neon-pink);
    }
    .host-details {
      flex: 1;
    }
    .host-name {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--neon-purple);
    }
    .host-bio {
      font-size: 0.95rem;
      color: var(--white);
      opacity: 0.7;
    }
    .event-datetime {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--neon-blue);
    }
    .event-location {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      margin-bottom: 0.5rem;
    }
    .location-text {
      font-size: 1rem;
      color: var(--white);
    }
    .get-directions-btn {
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      color: var(--white);
      border: none;
      border-radius: 999px;
      padding: 0.4rem 1.1rem;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 0 8px var(--neon-blue);
      margin-left: auto;
      transition: background 0.2s;
    }
    .get-directions-btn:active {
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-blue));
    }
    .countdown {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--neon-green);
      margin-bottom: 0.5rem;
    }
    .tags-row {
      display: flex;
      gap: 0.6rem;
      overflow-x: auto;
      padding-bottom: 0.3rem;
      margin-bottom: 1rem;
    }
    .tag-pill {
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
      color: var(--white);
      font-weight: 600;
      border-radius: 999px;
      padding: 0.35rem 1.1rem;
      font-size: 1rem;
      box-shadow: 0 0 8px var(--neon-purple);
      white-space: nowrap;
      user-select: none;
    }
    .resource-pool-list {
      margin: 0 0 0.7rem 0;
      padding: 0;
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 0.7rem;
    }
    .resource-item {
      background: var(--white);
      color: var(--black);
      border-radius: 999px;
      padding: 0.3rem 0.9rem;
      font-weight: 500;
      font-size: 1rem;
      box-shadow: 0 0 6px var(--neon-pink);
    }
    .contribute-btn, .book-ticket-btn {
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
      color: var(--white);
      border: none;
      border-radius: 999px;
      padding: 0.5rem 1.3rem;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 0 8px var(--neon-purple);
      margin-top: 0.7rem;
      transition: background 0.2s;
    }
    .contribute-btn:active, .book-ticket-btn:active {
      background: linear-gradient(90deg, var(--neon-pink), var(--neon-purple));
    }
    .ticket-info {
      display: flex;
      align-items: center;
      gap: 1.2rem;
      margin-bottom: 0.7rem;
    }
    .ticket-price {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--neon-green);
    }
    .seats-left {
      font-size: 1rem;
      color: var(--neon-blue);
      font-weight: 600;
    }
    .attendees-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      overflow-x: auto;
    }
    .attendee-pic {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--neon-purple);
      box-shadow: 0 0 6px var(--neon-purple);
    }
    .more-joined {
      color: var(--neon-green);
      font-weight: 600;
      margin-left: 0.5rem;
      font-size: 1rem;
    }
    .host-announcement {
      background: var(--white);
      color: var(--black);
      border-radius: var(--radius);
      box-shadow: 0 0 8px var(--neon-pink);
      padding: 1rem;
      margin-bottom: 1.2rem;
      font-size: 1rem;
      position: relative;
    }
    .announcement-time {
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.5rem;
    }
    .sticky-footer {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      width: 100vw;
      background: rgba(35,35,43,0.7);
      box-shadow: 0 -2px 24px var(--neon-purple);
      padding: 1rem 1.2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .footer-cta {
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
      color: var(--white);
      border: none;
      border-radius: 999px;
      padding: 0.7rem 2.2rem;
      font-weight: 800;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 0 12px var(--neon-purple);
      transition: background 0.2s;
    }
    .footer-cta:active {
      background: linear-gradient(90deg, var(--neon-pink), var(--neon-purple));
    }
    .footer-summary {
      color: var(--neon-green);
      font-size: 1.1rem;
      font-weight: 700;
      text-align: center;
    }
    @media (min-width: 600px) {
      main {
        padding: 2.2rem 0.7rem 6.5rem 0.7rem;
      }
      .event-banner {
        height: 320px;
      }
    }
  </style>
</head>
<body>
  <!-- Event Banner Section -->
  <section class="event-banner" id="event-banner">
    <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80" alt="Event Banner" id="banner-img">
    <div class="banner-overlay">
      <div class="banner-title" id="event-title">LANverse Neon Jam</div>
      <div class="banner-date-time" id="event-date-time">Sat, 22 Jun â€¢ 8:00 PM</div>
    </div>
    <div class="banner-badges" id="banner-badges">
      <span class="badge">ðŸ”¥ Trending</span>
      <span class="badge">ðŸŽ« Early Bird Ends Soon</span>
    </div>
    <div class="banner-actions">
      <button class="icon-btn" id="share-btn" title="Share Event">
        <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/></svg>
      </button>
    </div>
  </section>

  <main>
    <!-- Event Summary Section -->
    <section class="glass-card" id="event-summary">
      <div class="host-info">
        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Host Avatar" class="host-avatar" id="host-avatar">
        <div class="host-details">
          <div class="host-name" id="host-name">DJ Neon</div>
          <div class="host-bio" id="host-bio">Spinning the best of EDM & Lo-fi. 5+ years of party magic.</div>
        </div>
      </div>
      <div class="event-datetime" id="summary-date-time">Sat, 22 Jun â€¢ 8:00 PM</div>
      <div class="event-location">
        <span class="location-text" id="event-location">Neon Club, Downtown</span>
        <button class="get-directions-btn" id="directions-btn">Get Directions</button>
      </div>
      <div class="countdown" id="countdown-timer"></div>
    </section>

    <!-- Vibe & Tags -->
    <section class="glass-card" id="vibe-tags">
      <div class="tags-row">
        <span class="tag-pill">Jam</span>
        <span class="tag-pill">EDM</span>
        <span class="tag-pill">Lo-fi</span>
        <span class="tag-pill">Neon</span>
        <span class="tag-pill">Casual</span>
      </div>
    </section>

    <!-- Resource Pool / Contribution Section (conditional) -->
    <section class="glass-card" id="resource-pool" style="display: block;">
      <div style="font-weight:600; margin-bottom:0.7rem;">Resource Pool</div>
      <ul class="resource-pool-list">
        <li class="resource-item">2x Cold Drinks</li>
        <li class="resource-item">1x Speaker</li>
        <li class="resource-item">Snacks</li>
      </ul>
      <button class="contribute-btn" id="contribute-btn">Contribute Now</button>
    </section>

    <!-- Tickets Section (conditional) -->
    <section class="glass-card" id="tickets-section" style="display: block;">
      <div class="ticket-info">
        <span class="ticket-price">â‚¹299</span>
        <span class="seats-left">12 seats left</span>
      </div>
      <button class="book-ticket-btn" id="book-ticket-btn">Book Ticket</button>
    </section>

    <!-- Attendees Preview (optional) -->
    <section class="glass-card" id="attendees-preview" style="display: block;">
      <div style="font-weight:600; margin-bottom:0.7rem;">Attendees</div>
      <div class="attendees-row">
        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="attendee-pic" alt="Attendee">
        <img src="https://randomuser.me/api/portraits/men/45.jpg" class="attendee-pic" alt="Attendee">
        <img src="https://randomuser.me/api/portraits/women/46.jpg" class="attendee-pic" alt="Attendee">
        <img src="https://randomuser.me/api/portraits/men/47.jpg" class="attendee-pic" alt="Attendee">
        <span class="more-joined">+8 more joined</span>
      </div>
    </section>

    <!-- Host Announcement / Notes -->
    <section class="host-announcement" id="host-announcement">
      <div style="font-weight:600; margin-bottom:0.5rem;">Host Announcement</div>
      <div id="announcement-text">Get ready for a night of neon vibes! Dress code: Casual with a touch of glow. See you all at 8PM sharp!</div>
      <div class="announcement-time" id="announcement-time">Last updated: 2 hours ago</div>
    </section>
  </main>

  <!-- Sticky Footer CTA -->
  <footer class="sticky-footer" id="sticky-footer">
    <button class="footer-cta" id="footer-cta">Join Now</button>
  </footer>

  <script>
    // Check authentication status using JWT and backend
    async function checkAuth() {
      const token = localStorage.getItem('lanverse_token');
      if (!token) {
        window.location.href = 'auth.html';
        return null;
      }
      
      try {
        const res = await fetch('/api/profile', {
          headers: { 'Authorization': 'Bearer ' + token }
        });
        if (!res.ok) {
          localStorage.removeItem('lanverse_token');
          window.location.href = 'auth.html';
          return null;
        }
        return await res.json();
      } catch (error) {
        localStorage.removeItem('lanverse_token');
        window.location.href = 'auth.html';
        return null;
      }
    }
    
    // Initialize auth check
    checkAuth();
    // Demo event data map (should match home.html)
    const demoEvents = window.lanverseDemoEvents || {
      "lan-chill": {
        title: "LAN & Chill",
        date: "2024-06-21T19:00:00",
        location: "Central Park",
        bannerImg: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80",
        host: { name: "DJ Neon", avatar: "https://randomuser.me/api/portraits/men/32.jpg", bio: "Spinning the best of EDM & Lo-fi. 5+ years of party magic." },
        badges: ["ðŸ”¥ Trending"],
        tags: ["Chill", "EDM", "Casual"],
        resourcePool: ["2x Cold Drinks", "1x Speaker"],
        contributionEnabled: false,
        tickets: { required: true, price: 199, seatsLeft: 8 },
        attendees: ["https://randomuser.me/api/portraits/women/44.jpg", "https://randomuser.me/api/portraits/men/45.jpg"],
        moreAttendees: 3,
        announcement: { text: "Bring your own snacks!", time: "Last updated: 1 hour ago" },
        joined: false,
        eventPast: false
      },
      "board-game-bash": {
        title: "Board Game Bash",
        date: "2024-06-21T20:00:00",
        location: "Cafe 404",
        bannerImg: "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80",
        host: { name: "Alex Kim", avatar: "https://randomuser.me/api/portraits/men/65.jpg", bio: "Board game enthusiast. Loves Catan and Uno." },
        badges: ["ðŸŽ² Game Night"],
        tags: ["Board Games", "Chill"],
        resourcePool: ["Board Games", "Snacks"],
        contributionEnabled: true,
        tickets: { required: false, price: 0, seatsLeft: 20 },
        attendees: ["https://randomuser.me/api/portraits/women/46.jpg"],
        moreAttendees: 1,
        announcement: { text: "Vote for your favorite game!", time: "Last updated: 3 hours ago" },
        joined: false,
        eventPast: false
      },
      "poolside-beats": {
        title: "Poolside Beats",
        date: "2024-06-22T17:00:00",
        location: "Skyline Pool",
        bannerImg: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=800&q=80",
        host: { name: "DJ Aqua", avatar: "https://randomuser.me/api/portraits/men/47.jpg", bio: "Pool party specialist. EDM & House." },
        badges: ["ðŸ’¦ Pool Party"],
        tags: ["Pool", "EDM", "Swimwear"],
        resourcePool: ["Towels", "Drinks"],
        contributionEnabled: true,
        tickets: { required: true, price: 299, seatsLeft: 5 },
        attendees: [],
        moreAttendees: 0,
        announcement: { text: "Donâ€™t forget your swimsuit!", time: "Last updated: 30 min ago" },
        joined: false,
        eventPast: false
      },
      "retro-lan": {
        title: "Retro LAN",
        date: "2024-06-27T18:00:00",
        location: "Pixel House",
        bannerImg: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80",
        host: { name: "Jules Rivera", avatar: "https://randomuser.me/api/portraits/women/44.jpg", bio: "Retro gamer. LAN party OG." },
        badges: ["ðŸ•¹ï¸ Retro"],
        tags: ["LAN", "Retro", "Games"],
        resourcePool: ["Ethernet Cables", "Old PCs"],
        contributionEnabled: false,
        tickets: { required: false, price: 0, seatsLeft: 12 },
        attendees: [],
        moreAttendees: 0,
        announcement: { text: "BYO hardware!", time: "Last updated: 2 days ago" },
        joined: false,
        eventPast: false
      },
      "silent-disco": {
        title: "Silent Disco",
        date: "2024-06-28T21:00:00",
        location: "Rooftop",
        bannerImg: "https://images.unsplash.com/photo-1503676382389-4809596d5290?auto=format&fit=crop&w=800&q=80",
        host: { name: "Dev Patel", avatar: "https://randomuser.me/api/portraits/men/65.jpg", bio: "Silent party pioneer. Headphones provided!" },
        badges: ["ðŸŽ§ Silent"],
        tags: ["Disco", "Silent", "Night"],
        resourcePool: ["Headphones"],
        contributionEnabled: false,
        tickets: { required: true, price: 249, seatsLeft: 10 },
        attendees: [],
        moreAttendees: 0,
        announcement: { text: "Arrive early for best headphones!", time: "Last updated: 5 hours ago" },
        joined: false,
        eventPast: false
      }
    };
    // Get event key from URL
    function getEventKey() {
      const params = new URLSearchParams(window.location.search);
      return params.get('event');
    }
    const eventKey = getEventKey();
    const eventData = demoEvents[eventKey] || Object.values(demoEvents)[0];
    // Populate UI with eventData
    // Banner
    if (eventData.bannerImg) document.getElementById('banner-img').src = eventData.bannerImg;
    document.getElementById('event-title').textContent = eventData.title;
    document.getElementById('event-date-time').textContent = new Date(eventData.date).toLocaleString('en-US', {weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit'});
    // Badges
    const badgesEl = document.getElementById('banner-badges');
    badgesEl.innerHTML = '';
    eventData.badges.forEach(badge => {
      const span = document.createElement('span');
      span.className = 'badge';
      span.textContent = badge;
      badgesEl.appendChild(span);
    });
    // Host
    if (eventData.host) {
      document.getElementById('host-avatar').src = eventData.host.avatar;
      document.getElementById('host-name').textContent = eventData.host.name;
      document.getElementById('host-bio').textContent = eventData.host.bio;
    }
    document.getElementById('summary-date-time').textContent = new Date(eventData.date).toLocaleString('en-US', {weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit'});
    document.getElementById('event-location').textContent = eventData.location;
    // Countdown
    function updateCountdown() {
      const countdownEl = document.getElementById('countdown-timer');
      const eventDate = new Date(eventData.date);
      const now = new Date();
      if (eventDate > now) {
        const diff = eventDate - now;
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const mins = Math.floor((diff / (1000 * 60)) % 60);
        countdownEl.textContent = `Starts in ${days}d ${hours}h ${mins}m`;
      } else {
        countdownEl.textContent = '';
      }
    }
    updateCountdown();
    setInterval(updateCountdown, 60000);
    // Tags
    const tagsRow = document.querySelector('#vibe-tags .tags-row');
    tagsRow.innerHTML = '';
    eventData.tags.forEach(tag => {
      const span = document.createElement('span');
      span.className = 'tag-pill';
      span.textContent = tag;
      tagsRow.appendChild(span);
    });
    // Resource Pool
    const resourcePoolSection = document.getElementById('resource-pool');
    if (eventData.contributionEnabled && eventData.resourcePool && eventData.resourcePool.length) {
      resourcePoolSection.style.display = 'block';
      const ul = resourcePoolSection.querySelector('.resource-pool-list');
      ul.innerHTML = '';
      eventData.resourcePool.forEach(item => {
        const li = document.createElement('li');
        li.className = 'resource-item';
        li.textContent = item;
        ul.appendChild(li);
      });
    } else {
      resourcePoolSection.style.display = 'none';
    }
    // Tickets
    const ticketsSection = document.getElementById('tickets-section');
    if (eventData.tickets && eventData.tickets.required) {
      ticketsSection.style.display = 'block';
      ticketsSection.querySelector('.ticket-price').textContent = eventData.tickets.price ? `â‚¹${eventData.tickets.price}` : 'Free';
      ticketsSection.querySelector('.seats-left').textContent = `${eventData.tickets.seatsLeft} seats left`;
    } else {
      ticketsSection.style.display = 'none';
    }
    // Attendees
    const attendeesSection = document.getElementById('attendees-preview');
    if (eventData.attendees && eventData.attendees.length) {
      attendeesSection.style.display = 'block';
      const row = attendeesSection.querySelector('.attendees-row');
      row.innerHTML = '';
      eventData.attendees.forEach(pic => {
        const img = document.createElement('img');
        img.className = 'attendee-pic';
        img.src = pic;
        img.alt = 'Attendee';
        row.appendChild(img);
      });
      if (eventData.moreAttendees) {
        const span = document.createElement('span');
        span.className = 'more-joined';
        span.textContent = `+${eventData.moreAttendees} more joined`;
        row.appendChild(span);
      }
    } else {
      attendeesSection.style.display = 'none';
    }
    // Announcement
    if (eventData.announcement) {
      document.getElementById('announcement-text').textContent = eventData.announcement.text;
      document.getElementById('announcement-time').textContent = eventData.announcement.time;
    }
    // --- Share Button ---
    document.getElementById('share-btn').onclick = function() {
      const shareData = {
        title: eventData.title,
        text: `Check out this event: ${eventData.title} at ${eventData.location}`,
        url: window.location.href
      };
      if (navigator.share) {
        navigator.share(shareData);
      } else {
        navigator.clipboard.writeText(shareData.url);
        alert('Event link copied!');
      }
    };
    // --- Get Directions ---
    document.getElementById('directions-btn').onclick = function() {
      const query = encodeURIComponent(eventData.location);
      window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
    };
    // --- Contribute Now ---
    document.getElementById('contribute-btn').onclick = function() {
      alert('Contribution modal would open (not implemented).');
    };
    // --- Book Ticket ---
    document.getElementById('book-ticket-btn').onclick = function() {
      alert('Ticket booking modal would open (not implemented).');
    };
    // --- Footer CTA logic ---
    function updateFooterCTA() {
      const ctaBtn = document.getElementById('footer-cta');
      const footer = document.getElementById('sticky-footer');
      if (eventData.eventPast) {
        ctaBtn.style.display = 'none';
        footer.innerHTML = '<div class="footer-summary">Thanks for vibing! ðŸŽ‰</div>';
      } else if (eventData.joined) {
        ctaBtn.textContent = 'Go to Event Lobby';
        ctaBtn.onclick = function() { window.location.href = 'lobby.html'; };
      } else {
        ctaBtn.textContent = 'Join Now';
        ctaBtn.onclick = function() {
          // Prevent multiple overlays
          if (document.getElementById('joinWizardOverlay')) {
            document.getElementById('joinWizardOverlay').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            return;
          }
          // Create overlay
          const overlay = document.createElement('div');
          overlay.id = 'joinWizardOverlay';
          overlay.style.position = 'fixed';
          overlay.style.left = 0;
          overlay.style.top = 0;
          overlay.style.width = '100vw';
          overlay.style.height = '100vh';
          overlay.style.zIndex = 9999;
          overlay.style.background = 'rgba(20,20,40,0.92)';
          overlay.style.display = 'flex';
          overlay.style.justifyContent = 'center';
          overlay.style.alignItems = 'flex-start';
          overlay.style.overflowY = 'auto';
          // Create iframe
          const iframe = document.createElement('iframe');
          iframe.src = 'join.html';
          iframe.style.width = '100vw';
          iframe.style.height = '100vh';
          iframe.style.border = 'none';
          iframe.style.background = 'transparent';
          iframe.allow = 'clipboard-write';
          overlay.appendChild(iframe);
          // Add close button
          const closeBtn = document.createElement('button');
          closeBtn.textContent = 'Ã—';
          closeBtn.style.position = 'fixed';
          closeBtn.style.top = '24px';
          closeBtn.style.right = '32px';
          closeBtn.style.fontSize = '2.2rem';
          closeBtn.style.background = 'rgba(0,0,0,0.2)';
          closeBtn.style.color = '#fff';
          closeBtn.style.border = 'none';
          closeBtn.style.borderRadius = '50%';
          closeBtn.style.width = '48px';
          closeBtn.style.height = '48px';
          closeBtn.style.cursor = 'pointer';
          closeBtn.style.zIndex = 10000;
          closeBtn.style.boxShadow = '0 0 12px #7f5fff';
          closeBtn.onclick = function() {
            overlay.remove();
            document.body.style.overflow = '';
          };
          overlay.appendChild(closeBtn);
          document.body.appendChild(overlay);
          document.body.style.overflow = 'hidden';
        };
      }
    }
    updateFooterCTA();

    // --- Conditional Sections ---
    document.getElementById('resource-pool').style.display = eventData.contributionEnabled ? 'block' : 'none';
    document.getElementById('tickets-section').style.display = eventData.tickets.required ? 'block' : 'none';
    document.getElementById('attendees-preview').style.display = eventData.attendees.length ? 'block' : 'none';

    // --- Populate Data (if you want to make dynamic) ---
    // (For now, static HTML is used. You can loop through eventData.tags, attendees, etc. for full dynamic rendering.)
  </script>
</body>
</html>
